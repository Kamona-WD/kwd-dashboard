<!-- Navbar -->
<div class="sticky top-0 z-10 flex-shrink-0 bg-white dark:bg-darker">
    <div class="flex items-center justify-between border-b px-4 py-2 dark:border-primary-darker">
        <div class="flex items-center gap-4">
            <!-- Sidebar button -->
            {{#btn 
                variant="primary-light" 
                className="hidden lg:inline-flex p-1.5" 
                srText="Toggle sidebar" 
                attrs='@click="isSidebarOpen = !isSidebarOpen"' 
                icon="tabler--chevron-left" 
                iconSizeClasses="h-8 w-8" 
                iconClasses="transition-transform" 
                iconAttrs=':class="{ \'-rotate-180\': !isSidebarOpen }"'





            }}{{/btn}}

            <!-- Mobile menu button -->
            {{#btn 
                variant="primary-light" 
                className="lg:hidden inline-flex p-1.5" 
                srText="Toggle main manu" 
                attrs='@click="isMobileMainMenuOpen = !isMobileMainMenuOpen"' 
                icon=true
                iconSizeClasses="h-8 w-8" 
                iconClasses="transition-transform" 
                iconAttrs=':class="isMobileMainMenuOpen ? \'tabler--x\' : \'tabler--menu-2\'"'





            }}{{/btn}}

            <!-- Brand -->
            <a
                href="/"
                class="inline-block text-2xl font-bold uppercase tracking-wider text-primary-dark dark:text-light"
            >
                K-WD
            </a>
        </div>

        <!-- Mobile sub menu button -->
        {{#btn 
            variant="primary-light" 
            className="md:hidden inline-flex p-1.5" 
            srText="Toggle sub manu" 
            attrs='@click="isMobileSubMenuOpen = !isMobileSubMenuOpen"' 
            icon="tabler--dots-vertical"
            iconSizeClasses="h-8 w-8"



        }}{{/btn}}

        <nav aria-label="Secondary" class="hidden space-x-2 md:flex md:items-center">
            <!-- Toggle dark theme button -->
            <button
                aria-hidden="true"
                class="relative focus:outline-none"
                x-cloak
                @click="$store.settings.darkMode.toggle()"
            >
                <div class="h-6 w-12 rounded-full bg-primary-100 outline-none transition dark:bg-primary-lighter"></div>
                <div
                    class="absolute left-0 top-0 inline-flex h-6 w-6 scale-110 transform items-center justify-center rounded-full shadow-sm transition-all duration-150"
                    :class="{ 'translate-x-0 -translate-y-px  bg-white text-primary-dark': !$store.settings.darkMode.value, 'translate-x-6 text-primary-100 bg-primary-darker': $store.settings.darkMode.value }"
                >
                    <span
                        aria-hidden="true"
                        x-show="!$store.settings.darkMode.value"
                        class="iconify h-4 w-4 tabler--moon"
                    ></span>
                    <span
                        aria-hidden="true"
                        x-show="$store.settings.darkMode.value"
                        class="iconify h-4 w-4 tabler--sun"
                    ></span>
                </div>
            </button>

            <!-- Notification button -->
            {{#btn 
                variant="primary-light" 
                srText="Open notification panel" 
                attrs='@click="openNotificationsPanel"' 
                icon="tabler--bell"
                iconSizeClasses="h-8 w-8" 
                className="p-1.5"





            }}{{/btn}}

            <!-- Search button -->
            {{#btn 
                variant="primary-light" 
                srText="Open search panel" 
                attrs='@click="openSearchPanel"' 
                icon="tabler--search"
                iconSizeClasses="h-8 w-8" 
                className="p-1.5"





            }}{{/btn}}

            <!-- Settings button -->
            {{#btn 
                variant="primary-light" 
                srText="Open settings panel" 
                attrs='@click="$store.settings.panel.open()"' 
                icon="tabler--settings"
                iconSizeClasses="h-8 w-8" 
                className="p-1.5"





            }}{{/btn}}

            {{> partials/user-menu }}
        </nav>

        <!-- Mobile sub menu -->
        <nav
            x-transition:enter="transition duration-200 ease-in-out transform sm:duration-500"
            x-transition:enter-start="-translate-y-full opacity-0"
            x-transition:enter-end="translate-y-0 opacity-100"
            x-transition:leave="transition duration-300 ease-in-out transform sm:duration-500"
            x-transition:leave-start="translate-y-0 opacity-100"
            x-transition:leave-end="-translate-y-full opacity-0"
            x-show="isMobileSubMenuOpen"
            @click.away="isMobileSubMenuOpen = false"
            class="absolute inset-x-4 top-16 flex items-center rounded-md bg-white p-4 shadow-lg dark:bg-darker md:hidden"
            aria-label="Secondary"
        >
            <div class="space-x-2">
                <!-- Toggle dark theme button -->
                <button
                    aria-hidden="true"
                    class="relative focus:outline-none"
                    x-cloak
                    @click="$store.settings.darkMode.toggle()"
                >
                    <div
                        class="h-6 w-12 rounded-full bg-primary-100 outline-none transition dark:bg-primary-lighter"
                    ></div>
                    <div
                        class="absolute left-0 top-0 inline-flex h-6 w-6 scale-110 transform items-center justify-center rounded-full shadow-sm transition-all duration-200"
                        :class="{ 'translate-x-0 -translate-y-px  bg-white text-primary-dark': !$store.settings.darkMode.value, 'translate-x-6 text-primary-100 bg-primary-darker': $store.settings.darkMode.value }"
                    >
                        <span
                            aria-hidden="true"
                            x-show="!$store.settings.darkMode.value"
                            class="iconify h-4 w-4 tabler--moon"
                        ></span>
                        <span
                            aria-hidden="true"
                            x-show="$store.settings.darkMode.value"
                            class="iconify h-4 w-4 tabler--sun"
                        ></span>
                    </div>
                </button>

                <!-- Notification button -->
                {{#btn 
                    variant="primary-light" 
                    srText="Open notification panel" 
                    attrs='@click="openNotificationsPanel"' 
                    icon="tabler--bell"



                }}{{/btn}}

                <!-- Search button -->
                {{#btn 
                    variant="primary-light" 
                    srText="Open search panel" 
                    attrs='@click="openSearchPanel"' 
                    icon="tabler--search"



                }}{{/btn}}

                <!-- Settings button -->
                {{#btn 
                    variant="primary-light" 
                    srText="Open settings panel" 
                    attrs='@click="$store.settings.panel.open(() => { isMobileSubMenuOpen = false })"' 
                    icon="tabler--settings"



                }}{{/btn}}
            </div>

            <!-- User avatar button -->
            <div class="ml-auto">
                {{> partials/user-menu }}
            </div>
        </nav>
    </div>

    <!-- Mobile main manu -->
    <div
        class="border-b dark:border-primary-darker lg:hidden"
        x-show="isMobileMainMenuOpen"
        @click.away="isMobileMainMenuOpen = false"
        x-collapse
    >
        <nav aria-label="Main" class="space-y-2 px-2 py-4">
            {{> partials/navigation-links }}
        </nav>
    </div>
</div>
